# Лабораторная работа №12: Структуры и перечисления

## Цель работы
Формирование умений разрабатывать, отлаживать и испытывать программы с использованием структур и перечислений.

## Выполненные задания (3-й вариант)

### Задание 1: Работа со структурами
**Вариант 3: Прямоугольник**

Реализована структура `Rectangle` с полями для длины и ширины, включающая методы:
- `CalculateArea()` - расчет площади
- `CalculatePerimeter()` - расчет периметра  
- `IsSquare()` - проверка, является ли квадратом

### Задание 2: Работа с массивами структур
**Вариант 3: Прямоугольник**

Демонстрируется работа с массивом структур `Rectangle`:
- Создание массива с случайными данными
- Поиск прямоугольника с наибольшей площадью
- Сортировка по площади
- Фильтрация квадратов
- Статистические вычисления

### Задание 3: Работа с перечислениями
**Вариант 3: Цвета радуги**

Реализовано перечисление `RainbowColors` с методами:
- `GetColorDescription()` - получение описания цвета
- `IsWarmColor()` - определение теплого цвета
- `GetNextColor()` - получение следующего цвета в радуге

### Задание 4: Работа со структурами и перечислениями совместно
**Вариант 3: Фильм с жанром**

Создана структура `Movie` с полем жанра типа `MovieGenre`:
- Группировка фильмов по жанрам
- Сортировка по жанру
- Поиск фильмов определенного жанра
- Статистика по жанрам

## Теоретические основы

### Структуры (Structs)

**Определение:** Структуры - это типы значений, которые инкапсулируют данные и связанное поведение.

**Особенности структур:**
- Типы значений (хранятся в стеке)
- Не поддерживают наследование
- Могут реализовывать интерфейсы
- Имеют конструкторы по умолчанию
- Передаются по значению

**Синтаксис:**
```csharp
public struct Point
{
    public double X { get; set; }
    public double Y { get; set; }
    
    public double DistanceTo(Point other) => 
        Math.Sqrt(Math.Pow(X - other.X, 2) + Math.Pow(Y - other.Y, 2));
}
```

**Когда использовать структуры:**
- Небольшие объекты (до 16 байт)
- Неизменяемые объекты
- Часто используемые объекты
- Простые типы данных

### Перечисления (Enums)

**Определение:** Перечисления - это набор именованных констант, представляющих дискретные значения.

**Особенности перечислений:**
- Типы значений
- По умолчанию начинаются с 0
- Могут иметь явные значения
- Поддерживают побитовые операции

**Синтаксис:**
```csharp
public enum DayOfWeek
{
    Monday = 1,
    Tuesday = 2,
    Wednesday = 3,
    Thursday = 4,
    Friday = 5,
    Saturday = 6,
    Sunday = 7
}
```

**Работа с перечислениями:**
```csharp
// Получение всех значений
var values = Enum.GetValues<DayOfWeek>();

// Парсинг строки
var day = Enum.Parse<DayOfWeek>("Monday");

// Проверка существования
var exists = Enum.IsDefined(typeof(DayOfWeek), 5);
```

### Отличия структур от классов

| Характеристика | Структура | Класс |
|---|---|---|
| Тип | Значение | Ссылка |
| Наследование | Нет | Да |
| Конструктор по умолчанию | Всегда | Только если не определен |
| Инициализация | Автоматическая | Требует new |
| Передача | По значению | По ссылке |

### Практические рекомендации

**Для структур:**
1. Используйте для простых типов данных
2. Делайте структуры неизменяемыми
3. Реализуйте `Equals()` и `GetHashCode()`
4. Используйте readonly поля где возможно

**Для перечислений:**
1. Используйте для ограниченного набора значений
2. Добавляйте атрибуты для локализации
3. Используйте флаги для множественных значений
4. Документируйте значения перечислений

### LINQ с структурами и перечислениями

```csharp
// Фильтрация структур
var largeRectangles = rectangles.Where(r => r.CalculateArea() > 100);

// Группировка по перечислениям
var byGenre = movies.GroupBy(m => m.Genre);

// Сортировка
var sorted = movies.OrderBy(m => m.Genre).ThenBy(m => m.Title);

// Агрегация
var avgRating = movies.Average(m => m.Rating);
```

### Отладка структур и перечислений

**Советы по отладке:**
1. Используйте точки останова в методах структур
2. Проверяйте значения перечислений через Watch
3. Используйте условные точки останова
4. Логируйте изменения значений

**Инструменты отладки:**
- Immediate Window для проверки значений
- Locals Window для просмотра переменных
- Call Stack для отслеживания вызовов

### Производительность

**Структуры:**
- Быстрее для небольших объектов
- Меньше накладных расходов на GC
- Эффективнее при частом создании/уничтожении

**Перечисления:**
- Компилируются в константы
- Нулевые накладные расходы
- Эффективны в switch-выражениях

### Лучшие практики

1. **Именование:** Используйте PascalCase для структур и перечислений
2. **Документация:** Добавляйте XML-комментарии
3. **Валидация:** Проверяйте входные данные в конструкторах
4. **Тестирование:** Создавайте unit-тесты для методов структур
5. **Версионирование:** Будьте осторожны с изменениями перечислений

### Примеры использования в реальных проектах

**Структуры:**
- Геометрические фигуры
- Координаты и векторы
- Финансовые данные
- Настройки конфигурации

**Перечисления:**
- Статусы операций
- Типы пользователей
- Категории товаров
- Состояния объектов 